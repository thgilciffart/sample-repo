mkdir -p $HOME/.config/mpd
read -p "Enter the port to listen on (default 6000): " mpd_port_input
MPD_PORT=${mpd_port_input:-6000}
read -p "Enter the IP to listen on (default 0.0.0.0): " mpd_ip_input
MPD_LISTENING_IP=${mpd_ip_input:-0.0.0.0}
cat > $HOME/.config/mpd/mpd.conf >> mpd-config
music_directory         "/hdd/music"
playlist_directory      "/hdd/mpd/playlists"
db_file                 "/hdd/mpd/tag_cache"
pid_file                "/hdd/mpd/pid"
state_file              "/hdd/mpd/state"
sticker_file            "/hdd/mpd/sticker.sql"
bind_to_address         "$MPD_LISTENING_IP"
port                    "$MPD_PORT"
bind_to_address         "/hdd/mpd/socket"

audio_output {
    type        "httpd"
    name        "mpd server"
    encoder     "lame"      # Needs 'lame' installed
    bitrate     "128"
    format      "44100:16:1"
    always_on   "yes"       # prevent MPD from disconnecting on pause
    tags        "yes"       # httpd supports sending tags to listening streams.
}
mpd-config
sudo systemctl enable --now mpd.service
